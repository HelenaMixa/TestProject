<!--{% load static %}-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Orders</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="{% static 'orders/orders.js' %}"> </script>
    <script>
        window.setInterval(refreshOrders, 3000)

        function refreshOrders() {
<!--            alert(1)-->
            $.get('orders/', appendToTable)
            function appendToTable(response) {

                let table = $('table#orders');
                table.find('tr:gt(0)').remove();
                response.forEach((el)=> {
                    table.append(
                        $(  '<tr>' +
                            '<td>el.serial_number</td>' +
                            '<td>el.booking_id</td>' +
                            '<td>el.cost_usd</td>' +
                            '<td>el.cost_uah</td>' +
                            '<td>el.delivery_date</td>' +
                            '</tr>'
                        ))
                })
            }
        }

    </script>
</head>
<body>
<h1> This pages refreshes avery 600 second </h1>
<table id="orders">
    <tr>
        <th>#</th>
        <th>id</th>
        <th>order_number</th>
        <th>cost_usd</th>
        <th>cost_rub</th>
         <th>delivery_time</th>
    </tr>
</table>
</body>
</html>

<!--echo $content;-->
